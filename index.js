import{a as k,S as O,N as F,P as V,K as W,i as H,A as ce}from"./assets/vendor-DwraIAnb.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function s(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(n){if(n.ep)return;n.ep=!0;const a=s(n);fetch(n.href,a)}})();const v="https://books-backend.p.goit.global/books";async function de(){try{const e=await k.get(`${v}/category-list`);return console.log(e.data),e.data}catch(e){return console.error("Помилка при отриманні категорій:",e),[]}}async function z(){try{const e=await k.get(`${v}/top-books`);return console.log(e.data),e.data}catch(e){return console.error("Помилка при отриманні топу книг:",e),[]}}async function ue(e){try{const t=await k.get(`${v}/category`,{params:{category:e}});return console.log(t.data),t.data}catch(t){return console.error("Помилка при отриманні книг за категорією:",t),[]}}async function me(e){try{const t=await k.get(`${v}/${e}`);return console.log(t.data),t.data}catch(t){return console.error("Помилка при отриманні інформації про книгу книги:",t),null}}const fe=document.querySelector(".burger-btn"),D=document.querySelector(".mobile-menu"),pe=document.querySelector(".close-btn"),ge=document.querySelectorAll(".mobile-nav-link");fe.addEventListener("click",()=>{D.classList.add("is-open"),document.body.style.overflow="hidden"});pe.addEventListener("click",()=>{D.classList.remove("is-open"),document.body.style.overflow=""});ge.forEach(e=>{e.addEventListener("click",()=>{D.classList.remove("is-open"),document.body.style.overflow=""})});const ye=[{alt:"A book, sweater and a cup",mob:new URL("/js_117_Dimalux/assets/slide-1-mob-Cc6zvtrp.jpg",import.meta.url).href,mob2x:new URL("/js_117_Dimalux/assets/slide-1-mob@2x-BxLMA4JW.jpg",import.meta.url).href,tab:new URL("/js_117_Dimalux/assets/slide-1-tab-B-iawSTV.jpg",import.meta.url).href,tab2x:new URL("/js_117_Dimalux/assets/slide-1-tab@2x-BDrlqYgA.jpg",import.meta.url).href,desk:new URL("/js_117_Dimalux/assets/slide-1-desck-B8PASKW_.jpg",import.meta.url).href,desk2x:new URL("/js_117_Dimalux/assets/slide-1-desck@2x-DQD8wfpB.jpg",import.meta.url).href},{alt:"A book and glasses",mob:new URL("/js_117_Dimalux/assets/slide-2-mob-DDbJJ4lu.jpg",import.meta.url).href,mob2x:new URL("/js_117_Dimalux/assets/slide-2-mob@2x-uw3nuwm-.jpg",import.meta.url).href,tab:new URL("/js_117_Dimalux/assets/slide-2-tab-90L-xNWz.jpg",import.meta.url).href,tab2x:new URL("/js_117_Dimalux/assets/slide-2-tab@2x-BmPtjbdk.jpg",import.meta.url).href,desk:new URL("/js_117_Dimalux/assets/slide-2-desck-C8ZwBFDl.jpg",import.meta.url).href,desk2x:new URL("/js_117_Dimalux/assets/slide-2-desck@2x-ixCL5MHK.jpg",import.meta.url).href},{alt:"Bookshelves with lots of books",mob:new URL("/js_117_Dimalux/assets/slide-3-mob-QYLd9H-Q.jpg",import.meta.url).href,mob2x:new URL("/js_117_Dimalux/assets/slide-3-mob@2x-BeBhV7mo.jpg",import.meta.url).href,tab:new URL("/js_117_Dimalux/assets/slide-3-tab-BSTLpl4t.jpg",import.meta.url).href,tab2x:new URL("/js_117_Dimalux/assets/slide-3-tab@2x-DJOgWmei.jpg",import.meta.url).href,desk:new URL("/js_117_Dimalux/assets/slide-3-desck-DIHVxR5Y.jpg",import.meta.url).href,desk2x:new URL("/js_117_Dimalux/assets/slide-3-desck@2x-DBh22Oh4.jpg",import.meta.url).href},{alt:"A vase with flowers in front of white wall",mob:new URL("/js_117_Dimalux/assets/slide-4-mob-BgWQO8Go.jpg",import.meta.url).href,mob2x:new URL("/js_117_Dimalux/assets/slide-4-mob@2x-UXlyVfUq.jpg",import.meta.url).href,tab:new URL("/js_117_Dimalux/assets/slide-4-tab-UGM7yKlF.jpg",import.meta.url).href,tab2x:new URL("/js_117_Dimalux/assets/slide-4-tab@2x-r3kyjrid.jpg",import.meta.url).href,desk:new URL("/js_117_Dimalux/assets/slide-4-desck-DRlw8fXH.jpg",import.meta.url).href,desk2x:new URL("/js_117_Dimalux/assets/slide-4-desck@2x-D_brjqpn.jpg",import.meta.url).href}],be=[{subtitle:"Get 10% off your first order"},{subtitle:"Save 15% on some books"},{subtitle:"Summer Sale! Up to -40% discounts"},{subtitle:"Last chance to buy our spring bestsellers"}];function he(e){const t=document.querySelector("#hero-swiper");if(!t){console.error("[Swiper] Container #hero-swiper not found!");return}const s=e.map(o=>`
        <li class="swiper-slide">
          <picture>
            <source srcset="${o.desk} 1x, ${o.desk2x} 2x" media="(min-width: 1440px)" />
            <source srcset="${o.tab} 1x, ${o.tab2x} 2x" media="(min-width: 768px)" />
            <img src="${o.mob}" srcset="${o.mob2x} 2x" alt="${o.alt}" class="hero-slide-img" loading="lazy" />
          </picture>
        </li>
      `).join("");t.innerHTML=s}function T(){const e=document.querySelector(".swiper-btn.prev"),t=document.querySelector(".swiper-btn.next");!b||!e||!t||(e.disabled=b.isBeginning,t.disabled=b.isEnd,e.classList.toggle("disabled",b.isBeginning),t.classList.toggle("disabled",b.isEnd))}function U(e){const t=document.querySelector(".hero-subtitle");if(!t)return;const s=be[e];s&&(t.textContent=s.subtitle)}let b;window.addEventListener("DOMContentLoaded",()=>{he(ye);const e=document.querySelector(".swiper-btn.next"),t=document.querySelector(".swiper-btn.prev");requestAnimationFrame(()=>{b=new O(".swiper-gallery",{modules:[F,V,W],slidesPerView:1,loop:!1,allowTouchMove:!0,wrapperTag:"ul",navigation:{nextEl:e,prevEl:t},keyboard:{enabled:!0,onlyInViewport:!0},on:{init:()=>{T(),U(0)},slideChange:function(){T(),U(this.activeIndex)}}})})});const E=document.getElementById("book-list"),g=document.getElementById("show-more-btn"),Q=document.getElementById("showing-count"),j=document.getElementById("total-count"),w=document.getElementById("book-category-selector"),L=document.querySelectorAll(".book-category-btn"),J=document.querySelector(".loader");let f=[],m=0,x=!0;function B(){J.classList.add("book-visually-hidden")}function C(){J.classList.remove("book-visually-hidden")}function we(){w.disabled=!0}function K(){w.disabled=!1}function Y(){L.forEach(e=>e.disabled=!0)}function G(){L.forEach(e=>e.disabled=!1)}function I(){g.classList.remove("book-visually-hidden")}function R(){g.classList.add("book-visually-hidden")}function q(){const e=x?window.innerWidth<768?10:24:4;f.slice(m,m+e).forEach(s=>{const o=document.createElement("li");o.classList.add("book-card"),o.innerHTML=`
      <img class="book-image" src="${s.book_image}" alt="${s.title}" />
      <div class="book-info">
        <div class="book-subinfo">
          <h4 class="book-title">${s.title}</h4>
          <p class="book-author">${s.author}</p>
        </div>
        <p class="book-price">$${s.price??"N/A"}</p>
      </div>
      <button class="book-learn-btn" data-id="${s._id}">Learn More</button>
    `,E.appendChild(o)}),m+=e,Q.textContent=Math.min(m,f.length),m>=f.length&&g.classList.add("book-visually-hidden"),x=!1}async function Le(){C(),R(),q(),I(),B()}async function Z(e){try{g.classList.add("book-visually-hidden");const s=(await z()).find(o=>o.list_name.toLowerCase()===e.toLowerCase());if(!s){E.innerHTML="<p>No books found for this category.</p>",j.textContent=0,Q.textContent=0,g.style.display="none";return}f=s.books,j.textContent=f.length,q(),m>=f.length?R():I()}catch(t){console.error("Ошибка при загрузке книг категории:",t)}}async function M(){g.classList.add("book-visually-hidden"),we(),Y();const t=(await z()).flatMap(r=>r.books),o=(await de()).map(r=>ue(r.list_name)),a=(await Promise.all(o)).flat(),l=new Map;t.forEach(r=>{l.set(r._id,r)}),a.forEach(r=>{l.has(r._id)||l.set(r._id,r)}),f=Array.from(l.values()),j.textContent=f.length,q(),m>=f.length?R():I(),G(),K(),B()}w.addEventListener("change",async()=>{C();const e=w.value;E.innerHTML="",m=0,x=!0,e==="all"?await M():(await Z(e),K(),B())});L.forEach(e=>{e.addEventListener("click",async()=>{C();const t=e.getAttribute("data-category");Y(),L.forEach(s=>s.classList.remove("active")),e.classList.add("active"),E.innerHTML="",m=0,x=!0,t==="all"?await M():(await Z(t),G(),B())})});g.addEventListener("click",Le);M();const xe=new O(".feedbacks .swiper",{modules:[F,V,W],slidesPerView:1,spaceBetween:24,breakpoints:{768:{slidesPerView:2},1440:{slidesPerView:3}},navigation:{nextEl:".feedbacks .swiper-button-next",prevEl:".feedbacks .swiper-button-prev"},pagination:{el:".feedbacks .swiper-pagination"},keyboard:{enabled:!0}});xe.on("keyPress",(e,t)=>{t===9&&e.slideNext()});const p=document.querySelectorAll(".events-item"),X=document.querySelectorAll(".events-indicator"),ee=document.getElementById("prevBtn"),te=document.getElementById("nextBtn");let d=0,u=0;const oe=p.length;function y(){window.innerWidth>=768?(A(),u===0?(p[0].style.display="block",p[1]&&(p[1].style.display="block")):p[2]&&(p[2].style.display="block"),$(u),P(u,1)):(A(),p[d].style.display="block",$(d),P(d,oe-1))}function A(){p.forEach(e=>{e.style.display="none"})}function $(e){X.forEach((t,s)=>{s===e?t.classList.add("active"):t.classList.remove("active")})}function P(e,t){ee.disabled=e===0,te.disabled=e===t}function se(){window.innerWidth>=768?u>0&&(u=u-1,y()):d>0&&(d=d-1,y())}function ne(){window.innerWidth>=768?u<1&&(u=u+1,y()):d<oe-1&&(d=d+1,y())}function ke(e){window.innerWidth>=768?u=e:d=e,y()}ee.addEventListener("click",se);te.addEventListener("click",ne);X.forEach((e,t)=>{e.addEventListener("click",function(){ke(t)})});document.addEventListener("keydown",function(e){e.key==="ArrowLeft"&&se(),e.key==="ArrowRight"&&ne()});window.addEventListener("resize",y);document.querySelectorAll(".events-register").forEach(function(e){e.addEventListener("click",function(){const t=this.closest(".events-item").querySelector(".events-name").textContent;ve(t)})});function ve(e){const t=document.getElementById("contactModal"),s=document.getElementById("modalEventName");s.textContent=e,t.classList.add("active"),document.body.style.overflow="hidden"}function S(){document.getElementById("contactModal").classList.remove("active"),document.body.style.overflow="",document.getElementById("modalForm").reset()}document.getElementById("closeModal").addEventListener("click",S);document.getElementById("contactModal").addEventListener("click",function(e){e.target===this&&S()});document.addEventListener("keydown",function(e){e.key==="Escape"&&S()});document.getElementById("modalForm").addEventListener("submit",function(e){e.preventDefault();const t=new FormData(this),s=t.get("name"),o=t.get("email"),n=t.get("message");console.log("Form submitted:",{name:s,email:o,message:n}),alert("Дякуємо за реєстрацію!"),S()});y();const ie=document.querySelector(".sub-form"),Ee=document.querySelector("#user-email");ie.addEventListener("submit",Be);function Be(e){e.preventDefault();const t=Ee.value.trim();if(!Se(t)){_("error","Invalid Input","Please provide a valid email address");return}const o=_e();if(je(o,t)){_("warning","Already Subscribed","This email is already on the list"),N();return}De(o,t),_("success","Subscribed","You have successfully joined the list"),N()}function Se(e){return/^\w+(\.\w+)?@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/.test(e)}function _e(){const e=localStorage.getItem("subscriptionList");return e?JSON.parse(e):[]}function je(e,t){return e.includes(t)}function De(e,t){e.push(t),localStorage.setItem("subscriptionList",JSON.stringify(e))}function _(e,t,s){H[e]({title:t,message:s,position:"topRight"})}function N(){ie.reset()}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".modal-backdrop"),t=document.getElementById("quantity"),s=document.querySelector(".modal-close");let o=1;if(!e||!t||!s){console.warn("Элементы модалки не найдены");return}document.addEventListener("click",i=>{const c=i.target.closest("[data-id]");if(!c)return;const h=c.dataset.id;h&&a(h)}),e.addEventListener("click",i=>{(i.target.classList.contains("modal-backdrop")||i.target.closest(".modal-close"))&&l()}),document.addEventListener("keydown",i=>{i.key==="Escape"&&l()}),document.addEventListener("click",i=>{i.target.classList.contains("decrement")&&ae(),i.target.classList.contains("increment")&&r(),i.target.classList.contains("add-to-cart")&&re(),i.target.classList.contains("buy-now")&&le(i)});let n=null;async function a(i){const c=await me(i);if(!c){console.warn("Нет данных по книге");return}document.getElementById("modal-title").textContent=c.title,document.getElementById("modal-author").textContent=c.author,document.getElementById("modal-price").textContent=`$${c.price}`,document.getElementById("modal-book-image").src=c.book_image,document.getElementById("modal-book-image").alt=c.title,document.getElementById("details-text").textContent=c.description||"No description",document.getElementById("shipping-text").textContent="We ship across the United States within 2–5 business days. All orders are processed through USPS or a reliable courier service. Enjoy free standard shipping on orders over $50.",document.getElementById("returns-text").textContent="You can return an item within 14 days of receiving your order, provided it hasn’t been used and is in its original condition. To start a return, please contact our support team — we’ll guide you through the process quickly and hassle-free.",t.textContent=1,o=1,e.classList.remove("is-hidden"),document.body.style.overflow="hidden",n&&(n.destroy(),document.querySelectorAll(".ac-panel").forEach(h=>{h.style.height="",h.style.display=""})),n=new ce("#accordion",{duration:300,showMultiple:!0,openOnInit:[0]})}function l(){e.classList.add("is-hidden"),document.body.style.overflow="",n&&(n.destroy(),n=null,document.querySelectorAll(".ac-panel").forEach(i=>{i.style.height="",i.style.display=""}))}function r(){o++,t.textContent=o}function ae(){o>1&&(o--,t.textContent=o)}function re(){console.log(`Додано у корзину: ${o} шт.`)}function le(i){i.preventDefault(),H.success({title:"Дякуємо за замовлення!",position:"topRight",timeout:3e3,titleColor:"#000",titleSize:"16px",titleLineHeight:"1.5",progressBarColor:"#b44a04",color:"#ea8d50",transitionIn:"fadeInDown"})}});
//# sourceMappingURL=index.js.map
